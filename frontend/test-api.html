<!DOCTYPE html>
<html>
<head>
    <title>Test API</title>
</head>
<body>
    <h1>Test API ShopTastrophe</h1>
    
    <div>
        <h2>Test Register</h2>
        <button onclick="testRegister()">Test Register</button>
        <div id="register-result"></div>
    </div>
    
    <div>
        <h2>Test Login</h2>
        <button onclick="testLogin()">Test Login</button>
        <div id="login-result"></div>
    </div>

    <script>
        const API_BASE = "http://127.0.0.1:8000";

        async function testRegister() {
            const resultDiv = document.getElementById('register-result');
            try {
                console.log('ğŸ§ª Testing register...');
                const response = await fetch(`${API_BASE}/auth/register`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        email: `test${Date.now()}@example.com`,
                        password: "test123",
                        first_name: "Test",
                        last_name: "User", 
                        address: "123 Test St"
                    })
                });
                
                console.log('ğŸ“¡ Response status:', response.status);
                console.log('ğŸ“¡ Response ok:', response.ok);
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('âœ… Register success:', data);
                    resultDiv.innerHTML = `<p style="color: green;">âœ… Success: ${JSON.stringify(data)}</p>`;
                } else {
                    const error = await response.text();
                    console.error('âŒ Register error:', error);
                    resultDiv.innerHTML = `<p style="color: red;">âŒ Error: ${error}</p>`;
                }
            } catch (error) {
                console.error('ğŸ’¥ Network error:', error);
                resultDiv.innerHTML = `<p style="color: red;">ğŸ’¥ Network Error: ${error.message}</p>`;
            }
        }

        async function testLogin() {
            const resultDiv = document.getElementById('login-result');
            try {
                console.log('ğŸ§ª Testing login...');
                const response = await fetch(`${API_BASE}/auth/login`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        email: "newuser@example.com",
                        password: "test123"
                    })
                });
                
                console.log('ğŸ“¡ Response status:', response.status);
                console.log('ğŸ“¡ Response ok:', response.ok);
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('âœ… Login success:', data);
                    resultDiv.innerHTML = `<p style="color: green;">âœ… Success: ${JSON.stringify(data)}</p>`;
                } else {
                    const error = await response.text();
                    console.error('âŒ Login error:', error);
                    resultDiv.innerHTML = `<p style="color: red;">âŒ Error: ${error}</p>`;
                }
            } catch (error) {
                console.error('ğŸ’¥ Network error:', error);
                resultDiv.innerHTML = `<p style="color: red;">ğŸ’¥ Network Error: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>